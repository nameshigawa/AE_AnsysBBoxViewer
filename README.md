# AE_AnsysBBoxViewer

![AE Ansys BBox Viewer](screenshots/sample.jpg)

AE_AnsysBBoxViewer is an After Effects script that visualizes Python-based video analysis results using bounding boxes imported from JSON files.

It is designed for workflows where object detection or tracking is performed in Python, and the results are reviewed or refined visually inside After Effects.

## Features
- Visualize bounding boxes from Python-generated JSON data
- Frame-accurate playback synchronized with composition FPS
- Support for multiple bounding boxes using layer name IDs (BBox_0, BBox_1, ...)
- Automatic hiding of bounding boxes when no data exists
- Language-independent expressions (compatible with all AE UI languages)

## Requirements
- macOS or Windows
- After Effects 2020 or later
- JSON file imported as footage

## Usage
1. Import your analyzed MP4 file into After Effects.
2. Create a composition based on the MP4 (matching size, FPS, and duration).
3. Import the JSON file generated by the Python analysis.
4. Run `AE_AnsysBBoxViewer.jsx`.
5. In the created Controller layer, assign the JSON file using the JSON_Footage control.
6. Duplicate the BBox shape layer and rename it with an ID number (BBox_0, BBox_1, ...) to display multiple bounding boxes.

## JSON Format
The script expects the following JSON structure:

```json
[
  [
    {
      "id": 0,
      "x": 398,
      "y": 611,
      "width": 62,
      "height": 108,
      "label": "person",
      "conf": 0.52
    }
  ]
]
```

- The top-level array represents frames in time order.
- Bounding boxes are indexed per frame starting from 0.
- Shape layer names must include a zero-based numeric ID
  that matches the `id` field (e.g. Box_0, Box_1).
- If no bounding box exists for a given ID in a frame,
  the corresponding shape layer will be hidden automatically.
- Additional fields such as tracking IDs or custom metadata
  can be included and will be ignored by the viewer if not used.

### Bounding Box Fields

- `id`     : Zero-based bounding-box identifier
- `x`, `y` : Top-left position of the bounding box
- `width`  : Width of the bounding box
- `height` : Height of the bounding box
- `label`  : Class label (e.g. "person")
- `conf`   : Detection confidence (0.0 â€“ 1.0)

## Roadmap

- v1.1.0: Advanced bounding-box control
  - Automatic shape layer duplication by ID
  - Label-based color coding
  - Confidence threshold and visibility control

- v2.0.0: Annotation overlay
  - Label and confidence text display
  - Text layers following bounding boxes
  - UI-style visualization
